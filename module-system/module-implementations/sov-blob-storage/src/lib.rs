use sov_modules_macros::ModuleInfo;

pub struct BlobStorage<C: sov_modules_api::Context> {
    /// The address of blob storage module
    /// Note: this is address is generated by the module framework and the corresponding private key is unknown.
    #[address]
    pub(crate) address: C::Address,

    /// Actual storage of blobs
    /// stored this way (DA block number, blob)
    #[state]
    pub(crate) blobs: StateVec<(u64, Vec<u8>)>,
}

impl<C: sov_modules_api::Context> BlobStorage<C> {
    pub fn earliest_stored_block_number(&self) -> Option<u64> {
        self.blobs.get(0).map(|(block_number, _)| *block_number)
    }
}
